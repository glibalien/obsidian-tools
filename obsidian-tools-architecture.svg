<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 920 540" font-family="'Segoe UI', Arial, Helvetica, sans-serif">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.12"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 6" refX="10" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3 L 0 6 z" fill="#94a3b8"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 6" refX="10" refY="3" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 3 L 0 6 z" fill="#3b82f6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="920" height="540" fill="#f8fafc" rx="12"/>

  <!-- Title -->
  <text x="460" y="36" text-anchor="middle" fill="#0f172a" font-size="17" font-weight="700" letter-spacing="0.3">obsidian-tools architecture</text>

  <!-- Obsidian Chat Plugin -->
  <rect x="30" y="68" width="190" height="96" rx="10" fill="#7c3aed" filter="url(#shadow)"/>
  <text x="125" y="100" text-anchor="middle" fill="white" font-size="14" font-weight="600">Obsidian Chat</text>
  <text x="125" y="124" text-anchor="middle" fill="#ddd6fe" font-size="11">context-aware plugin</text>

  <!-- FastAPI Server -->
  <rect x="315" y="68" width="190" height="96" rx="10" fill="#0f172a" filter="url(#shadow)"/>
  <text x="410" y="100" text-anchor="middle" fill="white" font-size="14" font-weight="600">FastAPI Server</text>
  <text x="410" y="119" text-anchor="middle" fill="#94a3b8" font-size="11">orchestration layer</text>
  <text x="410" y="137" text-anchor="middle" fill="#94a3b8" font-size="11">(agentic loop)</text>

  <!-- Open LLM box -->
  <rect x="610" y="68" width="210" height="96" rx="10" fill="#059669" filter="url(#shadow)"/>
  <text x="715" y="100" text-anchor="middle" fill="white" font-size="14" font-weight="600">Open LLM</text>
  <text x="715" y="120" text-anchor="middle" fill="#a7f3d0" font-size="11">on Fireworks.ai</text>
  <text x="715" y="140" text-anchor="middle" fill="#d1fae5" font-size="11">low-cost inference</text>

  <!-- Arrow: Chat → FastAPI -->
  <line x1="222" y1="108" x2="310" y2="108" stroke="#94a3b8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="266" y="95" text-anchor="middle" fill="#64748b" font-size="9.5">query + context</text>

  <!-- Arrow: FastAPI → LLM -->
  <line x1="507" y1="100" x2="605" y2="100" stroke="#94a3b8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="556" y="87" text-anchor="middle" fill="#64748b" font-size="9.5">prompt + tools</text>

  <!-- Arrow: LLM → FastAPI (tool calls) -->
  <line x1="605" y1="122" x2="507" y2="122" stroke="#3b82f6" stroke-width="1.8" marker-end="url(#arrow-blue)" stroke-dasharray="6,3"/>
  <text x="556" y="140" text-anchor="middle" fill="#3b82f6" font-size="9.5">tool calls</text>

  <!-- FastMCP Server -->
  <rect x="315" y="240" width="190" height="80" rx="10" fill="#1e40af" filter="url(#shadow)"/>
  <text x="410" y="274" text-anchor="middle" fill="white" font-size="14" font-weight="600">FastMCP Server</text>
  <text x="410" y="294" text-anchor="middle" fill="#bfdbfe" font-size="11">20+ custom tools</text>

  <!-- Arrow: FastAPI → MCP -->
  <line x1="410" y1="166" x2="410" y2="235" stroke="#3b82f6" stroke-width="1.8" marker-end="url(#arrow-blue)" stroke-dasharray="6,3"/>
  <text x="435" y="205" text-anchor="start" fill="#3b82f6" font-size="9.5">JSON-RPC</text>

  <!-- Bottom layer boxes -->
  <!-- Obsidian Vault -->
  <rect x="80" y="400" width="175" height="88" rx="10" fill="white" stroke="#e2e8f0" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="167" y="432" text-anchor="middle" fill="#1e293b" font-size="13" font-weight="600">Obsidian Vault</text>
  <text x="167" y="452" text-anchor="middle" fill="#64748b" font-size="10.5">markdown + frontmatter</text>
  <text x="167" y="469" text-anchor="middle" fill="#64748b" font-size="10.5">wikilinks</text>

  <!-- ChromaDB -->
  <rect x="323" y="400" width="175" height="88" rx="10" fill="white" stroke="#e2e8f0" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="410" y="432" text-anchor="middle" fill="#1e293b" font-size="13" font-weight="600">ChromaDB</text>
  <text x="410" y="452" text-anchor="middle" fill="#64748b" font-size="10.5">local vector embeddings</text>
  <text x="410" y="469" text-anchor="middle" fill="#64748b" font-size="10.5">sentence-transformers</text>

  <!-- DuckDuckGo -->
  <rect x="565" y="400" width="175" height="88" rx="10" fill="white" stroke="#e2e8f0" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="652" y="432" text-anchor="middle" fill="#1e293b" font-size="13" font-weight="600">DuckDuckGo</text>
  <text x="652" y="455" text-anchor="middle" fill="#64748b" font-size="10.5">web search</text>

  <!-- Arrows: MCP ↔ bottom boxes -->
  <line x1="355" y1="322" x2="192" y2="396" stroke="#94a3b8" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
  <line x1="410" y1="322" x2="410" y2="396" stroke="#94a3b8" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>
  <line x1="465" y1="322" x2="628" y2="396" stroke="#94a3b8" stroke-width="1.5" marker-start="url(#arrow)" marker-end="url(#arrow)"/>

  <!-- Labels on MCP → bottom arrows -->
  <text x="255" y="358" text-anchor="middle" fill="#64748b" font-size="9" transform="rotate(-27, 255, 358)">read / write / traverse</text>
  <text x="426" y="362" text-anchor="start" fill="#64748b" font-size="9">semantic + keyword</text>
  <text x="562" y="355" text-anchor="middle" fill="#64748b" font-size="9" transform="rotate(27, 562, 355)">enrich</text>

  <!-- Legend -->
  <rect x="30" y="516" width="320" height="18" rx="3" fill="transparent"/>
  <line x1="35" y1="525" x2="62" y2="525" stroke="#94a3b8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="70" y="529" fill="#64748b" font-size="10">data flow</text>
  <line x1="160" y1="525" x2="187" y2="525" stroke="#3b82f6" stroke-width="1.8" marker-end="url(#arrow-blue)" stroke-dasharray="6,3"/>
  <text x="195" y="529" fill="#3b82f6" font-size="10">tool calls (MCP)</text>
</svg>
